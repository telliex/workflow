(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{177:function(t,e,_){t.exports=_.p+"assets/img/a985e1c0-1c52-48c9-b3d3-1b7b29aa32bc.1b03a8dc.png"},178:function(t,e,_){t.exports=_.p+"assets/img/a902c4aa-9d54-47c3-af59-a8343f02b60a.403e7f76.png"},234:function(t,e,_){"use strict";_.r(e);var i=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"tdd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tdd","aria-hidden":"true"}},[this._v("#")]),this._v(" TDD")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[e("strong",[this._v("不属于测试，而是属于软件开发")]),this._v("。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"一直被误解的-tdd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一直被误解的-tdd","aria-hidden":"true"}},[this._v("#")]),this._v(" 一直被误解的 TDD")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("先来说说单元测试典型的理解。基于代码的某个单元，使用 Mock 等技术编写"),e("code",[this._v("单元测试")]),this._v("，然后用这个单元测试来驱动开发，抑或是帮助在"),e("code",[this._v("重构、修改以后进行回归测试")]),this._v("。而现在大部分反对 TDD 的声音就是基于这个理解，如")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("工期紧，时间短，写 TDD 太浪费时间；")]),t._v(" "),_("li",[t._v("业务需求变化太快，修改功能都来不及，根本没有时间来写 TDD；")]),t._v(" "),_("li",[t._v("写 TDD 对开发人员的素质要求非常高，普通的开发人员不会写；")]),t._v(" "),_("li",[t._v("TDD 推行的最大问题在于大多数程序员还不会「写测试用例」和「重构」；")]),t._v(" "),_("li",[t._v("由于大量使用 Mock 和 Stub 技术，导致 UT 没有办法测试集成后的功能，对于测试业务价值作用不大")]),t._v(" "),_("li",[t._v("……")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"正确理解-tdd-概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#正确理解-tdd-概念","aria-hidden":"true"}},[this._v("#")]),this._v(" 正确理解 TDD 概念")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("p",[t._v("TDD 有广义和狭义之分，常说的是狭义的 TDD，也就是 "),_("code",[t._v("UTDD（Unit Test Driven Development")]),t._v("）。广义的 TDD 是 "),_("code",[t._v("ATDD（Acceptance Test Driven Development）")]),t._v("包括 "),_("strong",[t._v("BDD（Behavior Driven Development）")]),t._v("、"),_("strong",[t._v("EDD（Example Driven Development）")]),t._v("，"),_("strong",[t._v("FDD（Feature Driven Development）")]),t._v("、"),_("strong",[t._v("CDCD（Consumer Driven Contract Development）")]),t._v(" 等各种的实践方法。。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("UTDD 的原理是在"),e("code",[this._v("开发功能代码之前，先编写单元测试用例代码")]),this._v("，测试代码确定需要编写什么产品代码。")])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("blockquote",[_("p",[t._v("ATDD： "),_("strong",[t._v("Acceptance Test Driven Development（验收测试驱动开发）")]),_("br"),t._v("\n这是一种在编码开始之前将客户带入"),_("code",[t._v("测试设计过程")]),t._v("的技术。它也是一个协作实践，"),_("code",[t._v("用户，测试人员和开发人员")]),t._v("定义了自动验收标准。 ATDD 有助于确保所有项目成员准确理解需要完成和实施的内容。如果系统未通过测试可提供快速反馈，说明未满足要求。"),_("code",[t._v("验收测试以业务领域术语进行指定")]),t._v("。每个功能都必须提供真实且可衡量的业务价值，事实上，如果您的功能没有追溯至至少一个业务目标，那么您应该想知道为什么您要首先实施它。")])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("BDD：行为验收标准")]),t._v(" "),_("li",[t._v("EDD：特定的实例数据为验收标准")]),t._v(" "),_("li",[t._v("FDD: 它强调"),_("strong",[t._v("特性驱动")]),t._v("，快速迭代，即能保证快速开发，又能保证适当文档和质量，非常适合中小型团队开发管理。它提出的每个功能开发时间不超过两周，为每个用例 user case 限定了粒度，具有良好可执行性，也可以对项目的开发进程进行精确及时地监控。它抓住了软件开发的核心问题领域，即**正确和及时地构造软件*。")]),t._v(" "),_("li",[t._v("CDCD：以 Web Service API 消费者提出 API 契约来驱动 API 提供者开发 API")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:_(177),alt:"ATDD&UTDD"}}),e("br"),this._v("\n我们可以根据我们的业务场景，决定 TDD 是广义 (ATDD) 还是狭义 (UTDD) 的应用。如 Facebook 在金钱和人力资源相对充足、时间相对充裕的情况下追求的是代码质量，大量人员的良好协作与平台稳定，单元测试（UTDD）是非常有价值的。DHH 却在金钱和人力资源相对较少情况下追求最大化客户业务价值，使得少量人员能快速开发出软件并卖给客户赚钱，功能测试或者 ATDD 却更为适合。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"传统编码-tdd-编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#传统编码-tdd-编码","aria-hidden":"true"}},[this._v("#")]),this._v(" 传统编码 & TDD 编码")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"传统编码方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#传统编码方式","aria-hidden":"true"}},[this._v("#")]),this._v(" 传统编码方式")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("需求分析，想不清楚细节，管他呢，先开始写")]),t._v(" "),_("li",[t._v("发现需求细节不明确，去跟业务人员确认")]),t._v(" "),_("li",[t._v("确认好几次终于写完所有逻辑")]),t._v(" "),_("li",[t._v("运行起来测试一下，靠，果然不工作，调试")]),t._v(" "),_("li",[t._v("调试好久终于工作了")]),t._v(" "),_("li",[t._v("转测试，QA 测出 bug，debug， 打补丁")]),t._v(" "),_("li",[t._v("终于，代码可以工作了")]),t._v(" "),_("li",[t._v("一看代码烂的像坨屎，不敢动，动了还得手工测试，还得让 QA 测试，还得加班...")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"tdd-编码方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tdd-编码方式","aria-hidden":"true"}},[this._v("#")]),this._v(" TDD 编码方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"tdd-思维"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tdd-思维","aria-hidden":"true"}},[this._v("#")]),this._v(" TDD 思维")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"tdd-的好处"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tdd-的好处","aria-hidden":"true"}},[this._v("#")]),this._v(" TDD 的好处")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("明确的流程，一次只关注一个点，开发思维负担小")]),this._v(" "),e("li",[this._v("对于需求变更起到保护网的作用")]),this._v(" "),e("li",[this._v("先写测试可以帮助我们去思考需求，并提前澄清需求细节")]),this._v(" "),e("li",[this._v("取代手工测试，让问题反馈更快速")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"tdd-流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tdd-流程","aria-hidden":"true"}},[this._v("#")]),this._v(" TDD 流程")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("TDD 是一种流程（而非设计工具）"),e("br"),this._v(" "),e("img",{attrs:{src:_(178),alt:"TDD cycle"}})])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ol",[_("li",[t._v("写一个测试用例")]),t._v(" "),_("li",[t._v("运行测试（状态：红色不通过）")]),t._v(" "),_("li",[t._v("写刚好能让测试通过的实现")]),t._v(" "),_("li",[t._v("运行测试（状态：绿色通过）")]),t._v(" "),_("li",[t._v("识别坏味道，用手法修改代码（进行重构）")]),t._v(" "),_("li",[t._v("运行测试（状态：绿色通过）")])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[t._v("分离关注点，一次只戴一顶帽子，也就是"),_("code",[t._v("重构")]),t._v("跟"),_("code",[t._v("添加新功能")]),t._v("，一次仅做一种行为。")]),t._v(" "),_("li",[t._v("在我们编程的过程中，有几个关注点：需求，实现，设计。")]),t._v(" "),_("li",[t._v("TDD 给了我们明确的三个步骤，每个步骤关注一个方面。"),_("br"),t._v("\n➊ "),_("strong",[t._v("红")]),t._v("：写一个失败的测试，它是对一个小需求的描述，只需要"),_("code",[t._v("关心输入输出")]),t._v("，这个时候根本"),_("code",[t._v("不用关心如何实现")]),t._v("。"),_("br"),t._v("\n➋ "),_("strong",[t._v("绿")]),t._v("：专注在"),_("code",[t._v("用最快的方式实现当前这个小需求")]),t._v("，不用关心其他需求，也不要管代码的质量多么惨不忍睹。"),_("br"),t._v("\n➌ "),_("strong",[t._v("重构")]),t._v("：既不用思考需求，也没有实现的压力，只需要找出代码中的坏味道，并用一个手法消除它，"),_("code",[t._v("让代码变成整洁的代码")]),t._v("。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"tdd-的三条规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tdd-的三条规则","aria-hidden":"true"}},[this._v("#")]),this._v(" TDD 的三条规则")])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ol",[_("li",[t._v("在一个单元测试中，只允许编写刚好能够"),_("code",[t._v("导致失败的内容")]),t._v("（编译错误也算失败）")]),t._v(" "),_("li",[t._v("除非是为了使一个失败的 unit test 通过，否则"),_("code",[t._v("不允许编写任何产品代码")])]),t._v(" "),_("li",[t._v("只允许编写"),_("code",[t._v("刚好")]),t._v("能够使一个失败的 unit test 通过的产品代码")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"为什么很多人做-tdd-都做不起来？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么很多人做-tdd-都做不起来？","aria-hidden":"true"}},[this._v("#")]),this._v(" 为什么很多人做 TDD 都做不起来？")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("不会合理"),e("code",[this._v("拆分任务")]),e("br"),this._v("\nTDD 之前要拆分任务，把一个大需求拆成多个小需求。也可以拆出多个函数来。")])]),this._v(" "),e("li",[e("p",[this._v("不会写测试"),e("br"),this._v("\n什么是有效的单元测试，有很多人写测试，连到底在测什么都不清楚，也可能连断言都没有，通过控制台输出，肉眼对比来验证。")])])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"tip custom-block"},[_("p",{staticClass:"custom-block-title"},[t._v("好的单元测试应该符合几条原则")]),t._v(" "),_("ul",[_("li",[t._v("简单，只测试一个需求")]),t._v(" "),_("li",[t._v("符合 Given-When-Then 格式")]),t._v(" "),_("li",[t._v("速度快")]),t._v(" "),_("li",[t._v("包含断言")]),t._v(" "),_("li",[t._v("可以重复执行")])])])},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ul",[_("li",[_("p",[t._v("不会写刚好的实现"),_("br"),t._v("\n很多人写实现的时候无法专注当前需求，一不小心就把其他需求也实现了，就破坏了节奏感")])]),t._v(" "),_("li",[_("p",[t._v("不会重构"),_("br"),t._v("\n不懂什么是 Clean Code，看不出 Smell，没有及时重构，等想要重构时已经难以下手了。"),_("br"),t._v("\n不知道用合适的「手法」消除 Smell。")])]),t._v(" "),_("li",[_("p",[t._v("基础设施"),_("br"),t._v("\n对于特定技术栈，没有把单元测试基础设施搭建好，导致写测试时无法专注在测试用例上。")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"闲话"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#闲话","aria-hidden":"true"}},[this._v("#")]),this._v(" 闲话")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("我们写不写单元测试有什么影响呢？答案是，不写单元测试，你就快不起来。为啥呢？因为每次发布，你都要投入人力来进行手工测试；因为没有测试，你倾向于不敢随意重构，这又导致代码逐渐腐化，复杂度使得你的开发速度降低。")]),this._v(" "),e("li",[this._v("写不好是能力问题，不写则是态度问题。")]),this._v(" "),e("li",[this._v("TDD，最好先行，因为可以提高反馈速度，缩短反馈周期，与此同时减少不必要的浪费。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TDD 练功尝试")]),this._v(" "),e("ol",[e("li",[this._v("写 TDD 时，一个测试如果不能 5 分钟完成. 就算太大了")]),this._v(" "),e("li",[this._v("尝试不用滑鼠，仅用快捷键编码")])])])}],r=_(0),v=Object(r.a)({},function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),_("ul",[_("li",[t._v("先分解任务，分离关注点")]),t._v(" "),_("li",[t._v("列 Example，用实例化需求，澄清需求细节")]),t._v(" "),_("li",[t._v("写测试，只关注需求，程序的输入输出，不关心中间过程")]),t._v(" "),_("li",[t._v("写实现，不考虑别的需求，用最简单的方式满足当前这个小需求即可")]),t._v(" "),_("li",[t._v("重构，用手法消除"),_("router-link",{attrs:{to:"./../refactor/"}},[t._v("代码里的坏味道")])],1),t._v(" "),_("li",[t._v("写完，手动测试一下，基本没什么问题，有问题补个用例，修复")]),t._v(" "),_("li",[t._v("转测试，小问题，补用例，修复")]),t._v(" "),_("li",[t._v("代码整洁且用例齐全，信心满满地提交")])]),t._v(" "),t._m(15),t._v(" "),_("p",[t._v("以下提及的 TDD ，我们探讨狭义的 UTDD 。")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),_("p",[t._v("本质是：")]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),_("p",[_("a",{attrs:{href:"https://www.bilibili.com/video/av9208705/",target:"_blank",rel:"noopener noreferrer"}},[t._v("单元测试演示"),_("OutboundLink")],1)]),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://www.bilibili.com/video/av9208705/",target:"_blank",rel:"noopener noreferrer"}},[t._v("直播"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://martinfowler.com/bliki/BeckDesignRules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("简单设计四规则"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://zh.wikipedia.org/wiki/SOLID_(%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1)",target:"_blank",rel:"noopener noreferrer"}},[t._v("SOLID"),_("OutboundLink")],1)])]),t._v(" "),t._m(31)])},i,!1,null,null,null);e.default=v.exports}}]);